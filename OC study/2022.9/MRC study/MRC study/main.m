

#import <Foundation/Foundation.h>
#import "MyObject.h"


int main(int argc, const char * argv[]) {
    @autoreleasepool {
//        // 自己生成并持有对象
//        id object = [[NSObject alloc] init];
////
////        // 自己持有对象
////        NSLog(@"%@", object);
////
////        NSLog(@"%lu", [object retainCount]);
//        [object release];
//        object = NULL;
//        NSLog(@"%lu", [object retainCount]);
//        // 释放对象
//        NSLog(@"%@", object);
//
//        [object release];
//        // 再次释放以非自己持有的对象
//        // 应用程序奔溃
//        NSLog(@"%lu", [object retainCount]);
//
//        NSLog(@"%@", object);
//
//        [object release];
//
//        NSLog(@"%@", object);
//
//        [object release];
//
//        NSLog(@"%@", object);
//
//        // 奔溃情况：
//        //  再度废弃已经废弃的对象时奔溃
//        //  访问已经废弃的对象时崩溃
//
//        // 指向对象的指针貌似还被保留在object变量中，貌似还能访问
//        // 对象一经释放，绝对不可访问
//
        
//        // 自己生成并持有对象
//        id object = [NSObject new];
//
//        // 自己持有对象
        
//        // 自己生成并持有对象的不可变副本
//        id objectCopy = [object copy];
//
//        // 自己生成并持有对象的可变副本
//        id objectMutableCopy = [object mutableCopy];
        
        
        
//        // 取得非自己生成并持有的对象
//        id object = [NSMutableArray array];
//
//        // 取得的对象存在但自己不持有对象
//
//        [object release];
//        // 释放了非自己持有的对象，导致程序奔溃
//
//        NSLog(@"%@", object);
//
//        [object retain];
//
//        // 自己持有对象
        
//        id obj = [MyObject object];
//        // 取得对象存在，但自己不持有对象
//
////        [obj retain];
////        // 自己持有对象
//
//        [obj release];
//
//        MyObject* object = [[MyObject alloc] init];
//
//        NSLog(@"%@", object.str);
//
//        NSLog(@"%lu", [object retainCount]);
//
//        [object release];
//
//        NSLog(@"%@", object.str);
//
//        NSLog(@"%lu", [object retainCount]);
//
//        [object release];
//
//        NSLog(@"%lu", [object retainCount]);
//
//        NSLog(@"%@", object.str);
        
//        id obj = [NSMutableArray array];
//
//        
//        [obj release];
//
//        NSLog(@"dsg");
    }
    return 0;
}

